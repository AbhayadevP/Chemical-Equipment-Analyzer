This file is a merged representation of the entire codebase, combined into a single document by Repomix.
The content has been processed where security check has been disabled.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Security check has been disabled - content may contain sensitive information
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
equipment-visualizer/
  backend/
    analyzer/
      migrations/
        __init__.py
      __init__.py
      admin.py
      apps.py
      models.py
      tests.py
      urls.py
      views.py
    api/
      __init__.py
      admin.py
      apps.py
      models.py
      tests.py
      urls.py
      views.py
    equipment_backend/
      __init__.py
      asgi.py
      settings.py
      urls.py
      wsgi.py
    db.sqlite3
    manage.py
    requirements.txt
  frontend/
    public/
      index.html
    src/
      components/
        EquipmentTypeChart.css
        EquipmentTypeChart.js
        FileUpload.css
        FileUpload.js
        ResultsDisplay.css
        ResultsDisplay.js
      App.css
      App.js
      index.css
      index.js
    .gitignore
    package.json
  QUICK_START.md
  README.md
  sample_data.csv
test_equipment.csv
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="equipment-visualizer/backend/analyzer/migrations/__init__.py">

</file>

<file path="equipment-visualizer/backend/analyzer/__init__.py">

</file>

<file path="equipment-visualizer/backend/analyzer/admin.py">
from django.contrib import admin

# Register your models here.
</file>

<file path="equipment-visualizer/backend/analyzer/apps.py">
from django.apps import AppConfig


class AnalyzerConfig(AppConfig):
    name = 'analyzer'
</file>

<file path="equipment-visualizer/backend/analyzer/models.py">
from django.db import models

# Create your models here.
</file>

<file path="equipment-visualizer/backend/analyzer/tests.py">
from django.test import TestCase

# Create your tests here.
</file>

<file path="equipment-visualizer/backend/analyzer/urls.py">
from django.urls import path
from . import views

urlpatterns = [
    path('analyze/', views.analyze_csv, name='analyze_csv'),
]
</file>

<file path="equipment-visualizer/backend/analyzer/views.py">
from rest_framework.decorators import api_view
from rest_framework.response import Response
from rest_framework import status
import pandas as pd
import io


@api_view(['POST'])
def analyze_csv(request):
    """
    This function receives a CSV file, processes it, and returns statistics.
    
    Flow:
    1. Check if file exists in request
    2. Read CSV using Pandas
    3. Calculate statistics
    4. Return JSON response
    """
    
    # Step 1: Check if file was uploaded
    if 'file' not in request.FILES:
        return Response(
            {'error': 'No file provided'},
            status=status.HTTP_400_BAD_REQUEST
        )
    
    csv_file = request.FILES['file']
    
    # Step 2: Read CSV file using Pandas
    try:
        # Read the file content
        file_content = csv_file.read().decode('utf-8')
        
        # Convert to Pandas DataFrame
        df = pd.read_csv(io.StringIO(file_content))
        
        # Step 3: Validate required columns exist
        required_columns = ['equipment_name', 'equipment_type', 'flowrate', 'pressure', 'temperature']
        
        missing_columns = [col for col in required_columns if col not in df.columns]
        if missing_columns:
            return Response(
                {'error': f'Missing columns: {", ".join(missing_columns)}'},
                status=status.HTTP_400_BAD_REQUEST
            )
        
        # Step 4: Calculate statistics
        total_equipment = len(df)
        avg_flowrate = df['flowrate'].mean()
        avg_pressure = df['pressure'].mean()
        avg_temperature = df['temperature'].mean()
        
        # Count equipment per type
        equipment_counts = df['equipment_type'].value_counts().to_dict()
        
        # Step 5: Prepare response data
        response_data = {
            'total_equipment': total_equipment,
            'average_flowrate': round(avg_flowrate, 2),
            'average_pressure': round(avg_pressure, 2),
            'average_temperature': round(avg_temperature, 2),
            'equipment_by_type': equipment_counts
        }
        
        # Step 6: Return JSON response
        return Response(response_data, status=status.HTTP_200_OK)
        
    except Exception as e:
        return Response(
            {'error': f'Error processing file: {str(e)}'},
            status=status.HTTP_500_INTERNAL_SERVER_ERROR
        )
</file>

<file path="equipment-visualizer/backend/api/__init__.py">

</file>

<file path="equipment-visualizer/backend/api/admin.py">
from django.contrib import admin

# No admin models needed for this phase
</file>

<file path="equipment-visualizer/backend/api/apps.py">
from django.apps import AppConfig


class ApiConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'api'
</file>

<file path="equipment-visualizer/backend/api/models.py">
from django.db import models

# No models needed for this phase - backend only processes CSV files
</file>

<file path="equipment-visualizer/backend/api/tests.py">
from django.test import TestCase

# Tests can be added later if needed
</file>

<file path="equipment-visualizer/backend/api/urls.py">
from django.urls import path
from . import views

urlpatterns = [
    path('upload/', views.upload_csv, name='upload_csv'),
]
</file>

<file path="equipment-visualizer/backend/api/views.py">
import pandas as pd
from rest_framework.decorators import api_view
from rest_framework.response import Response
from rest_framework import status


@api_view(['POST'])
def upload_csv(request):
    """
    API endpoint to receive CSV file and return calculated statistics.
    
    Expected CSV columns:
    - equipment_name
    - equipment_type
    - flowrate
    - pressure
    - temperature
    """
    if 'file' not in request.FILES:
        return Response(
            {'error': 'No file provided'}, 
            status=status.HTTP_400_BAD_REQUEST
        )
    
    csv_file = request.FILES['file']
    
    try:
        # Read CSV file using Pandas
        df = pd.read_csv(csv_file)
        
        # Check for required columns (case-insensitive)
        required_columns = ['equipment_name', 'equipment_type', 'flowrate', 'pressure', 'temperature']
        df_columns_lower = [col.lower().strip() for col in df.columns]
        
        # Map column names (case-insensitive)
        column_mapping = {}
        for req_col in required_columns:
            found = False
            for df_col in df.columns:
                if df_col.lower().strip() == req_col:
                    column_mapping[req_col] = df_col
                    found = True
                    break
            if not found:
                return Response(
                    {'error': f'Missing required column: {req_col}'},
                    status=status.HTTP_400_BAD_REQUEST
                )
        
        # Rename columns to standardize
        df_renamed = df.rename(columns={v: k for k, v in column_mapping.items()})
        
        # Calculate statistics
        total_equipment = len(df_renamed)
        
        # Calculate averages (handle missing values)
        avg_flowrate = df_renamed['flowrate'].mean() if 'flowrate' in df_renamed.columns else None
        avg_pressure = df_renamed['pressure'].mean() if 'pressure' in df_renamed.columns else None
        avg_temperature = df_renamed['temperature'].mean() if 'temperature' in df_renamed.columns else None
        
        # Count equipment per type
        equipment_per_type = df_renamed['equipment_type'].value_counts().to_dict()
        
        # Prepare response
        response_data = {
            'total_equipment': total_equipment,
            'average_flowrate': float(avg_flowrate) if avg_flowrate is not None and not pd.isna(avg_flowrate) else None,
            'average_pressure': float(avg_pressure) if avg_pressure is not None and not pd.isna(avg_pressure) else None,
            'average_temperature': float(avg_temperature) if avg_temperature is not None and not pd.isna(avg_temperature) else None,
            'equipment_per_type': equipment_per_type,
        }
        
        return Response(response_data, status=status.HTTP_200_OK)
        
    except pd.errors.EmptyDataError:
        return Response(
            {'error': 'CSV file is empty'},
            status=status.HTTP_400_BAD_REQUEST
        )
    except pd.errors.ParserError as e:
        return Response(
            {'error': f'Invalid CSV format: {str(e)}'},
            status=status.HTTP_400_BAD_REQUEST
        )
    except Exception as e:
        return Response(
            {'error': f'Error processing file: {str(e)}'},
            status=status.HTTP_500_INTERNAL_SERVER_ERROR
        )
</file>

<file path="equipment-visualizer/backend/equipment_backend/__init__.py">

</file>

<file path="equipment-visualizer/backend/equipment_backend/asgi.py">
"""
ASGI config for equipment_backend project.

It exposes the ASGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/6.0/howto/deployment/asgi/
"""

import os

from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'equipment_backend.settings')

application = get_asgi_application()
</file>

<file path="equipment-visualizer/backend/equipment_backend/settings.py">
"""
Django settings for equipment_backend project.

Generated by 'django-admin startproject' using Django 6.0.2.

For more information on this file, see
https://docs.djangoproject.com/en/6.0/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/6.0/ref/settings/
"""

from pathlib import Path

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent


# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/6.0/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = 'django-insecure-9d32q$y0rb67*)7j5+suyobvc6_%+1dpg_=_4=+qd=jchjrjo1'

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = True

ALLOWED_HOSTS = []


# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'rest_framework',
    'corsheaders',
    'api',
    'analyzer',
]

MIDDLEWARE = [
    'corsheaders.middleware.CorsMiddleware',
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'corsheaders.middleware.CorsMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'equipment_backend.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'equipment_backend.wsgi.application'


# Database
# https://docs.djangoproject.com/en/6.0/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}


# Password validation
# https://docs.djangoproject.com/en/6.0/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Internationalization
# https://docs.djangoproject.com/en/6.0/topics/i18n/

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/6.0/howto/static-files/

STATIC_URL = 'static/'

# CORS settings for frontend-backend communication
CORS_ALLOWED_ORIGINS = [
    "http://localhost:3000",
    "http://127.0.0.1:3000",
]

CORS_ALLOW_CREDENTIALS = True

# REST Framework settings
REST_FRAMEWORK = {
    'DEFAULT_RENDERER_CLASSES': [
        'rest_framework.renderers.JSONRenderer',
    ],
    'DEFAULT_PARSER_CLASSES': [
        'rest_framework.parsers.MultiPartParser',
        'rest_framework.parsers.JSONParser',
    ],
}
</file>

<file path="equipment-visualizer/backend/equipment_backend/urls.py">
from django.contrib import admin
from django.urls import path, include  # Add 'include'

urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/', include('analyzer.urls')),  # Add this line
]
</file>

<file path="equipment-visualizer/backend/equipment_backend/wsgi.py">
"""
WSGI config for equipment_backend project.

It exposes the WSGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/6.0/howto/deployment/wsgi/
"""

import os

from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'equipment_backend.settings')

application = get_wsgi_application()
</file>

<file path="equipment-visualizer/backend/db.sqlite3">

</file>

<file path="equipment-visualizer/backend/manage.py">
#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys


def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'equipment_backend.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == '__main__':
    main()
</file>

<file path="equipment-visualizer/backend/requirements.txt">
Django==6.0.2
djangorestframework==3.15.2
django-cors-headers==4.6.0
pandas==2.2.2
</file>

<file path="equipment-visualizer/frontend/public/index.html">
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Chemical Equipment Parameter Visualizer"
    />
    <title>Equipment Parameter Visualizer</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>
</file>

<file path="equipment-visualizer/frontend/src/components/EquipmentTypeChart.css">
.chart-container {
  position: relative;
  height: 400px;
  margin-top: 20px;
}
</file>

<file path="equipment-visualizer/frontend/src/components/EquipmentTypeChart.js">
import React from 'react';
import {
  Chart as ChartJS,
  CategoryScale,
  LinearScale,
  BarElement,
  Title,
  Tooltip,
  Legend,
} from 'chart.js';
import { Bar } from 'react-chartjs-2';
import './EquipmentTypeChart.css';

ChartJS.register(
  CategoryScale,
  LinearScale,
  BarElement,
  Title,
  Tooltip,
  Legend
);

function EquipmentTypeChart({ data }) {
  if (!data || Object.keys(data).length === 0) {
    return <p>No data available for chart</p>;
  }

  const chartData = {
    labels: Object.keys(data),
    datasets: [
      {
        label: 'Number of Equipment',
        data: Object.values(data),
        backgroundColor: [
          'rgba(76, 175, 80, 0.8)',
          'rgba(33, 150, 243, 0.8)',
          'rgba(255, 152, 0, 0.8)',
          'rgba(156, 39, 176, 0.8)',
          'rgba(244, 67, 54, 0.8)',
        ],
        borderColor: [
          'rgba(76, 175, 80, 1)',
          'rgba(33, 150, 243, 1)',
          'rgba(255, 152, 0, 1)',
          'rgba(156, 39, 176, 1)',
          'rgba(244, 67, 54, 1)',
        ],
        borderWidth: 1,
      },
    ],
  };

  const options = {
    responsive: true,
    maintainAspectRatio: true,
    plugins: {
      legend: {
        display: true,
        position: 'top',
      },
      title: {
        display: false,
      },
    },
    scales: {
      y: {
        beginAtZero: true,
        ticks: {
          stepSize: 1,
        },
      },
    },
  };

  return (
    <div className="chart-container">
      <Bar data={chartData} options={options} />
    </div>
  );
}

export default EquipmentTypeChart;
</file>

<file path="equipment-visualizer/frontend/src/components/FileUpload.css">
.file-upload-container {
  margin-bottom: 30px;
}

.file-upload-box {
  background-color: white;
  border: 2px dashed #ccc;
  border-radius: 8px;
  padding: 40px;
  text-align: center;
  transition: border-color 0.3s;
}

.file-upload-box:hover {
  border-color: #4CAF50;
}

.upload-button {
  background-color: #4CAF50;
  color: white;
  border: none;
  padding: 12px 24px;
  font-size: 16px;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.3s;
}

.upload-button:hover:not(:disabled) {
  background-color: #45a049;
}

.upload-button:disabled {
  background-color: #cccccc;
  cursor: not-allowed;
}

.upload-hint {
  margin-top: 15px;
  color: #666;
  font-size: 14px;
}
</file>

<file path="equipment-visualizer/frontend/src/components/FileUpload.js">
import React, { useRef } from 'react';
import axios from 'axios';
import './FileUpload.css';

const API_URL = 'http://localhost:8000/api/upload/';

function FileUpload({ onUploadStart, onUploadSuccess, onUploadError, loading }) {
  const fileInputRef = useRef(null);

  const handleFileChange = async (event) => {
    const file = event.target.files[0];
    
    if (!file) {
      return;
    }

    // Check if file is CSV
    if (!file.name.endsWith('.csv')) {
      onUploadError('Please upload a CSV file');
      return;
    }

    const formData = new FormData();
    formData.append('file', file);

    onUploadStart();

    try {
      const response = await axios.post(API_URL, formData, {
        headers: {
          'Content-Type': 'multipart/form-data',
        },
      });

      onUploadSuccess(response.data);
    } catch (error) {
      if (error.response && error.response.data && error.response.data.error) {
        onUploadError(error.response.data.error);
      } else {
        onUploadError('Failed to upload file. Please check if the backend server is running.');
      }
    }
  };

  const handleButtonClick = () => {
    fileInputRef.current?.click();
  };

  return (
    <div className="file-upload-container">
      <div className="file-upload-box">
        <input
          ref={fileInputRef}
          type="file"
          accept=".csv"
          onChange={handleFileChange}
          style={{ display: 'none' }}
          disabled={loading}
        />
        <button
          className="upload-button"
          onClick={handleButtonClick}
          disabled={loading}
        >
          {loading ? 'Processing...' : 'Select CSV File'}
        </button>
        <p className="upload-hint">
          Select a CSV file with equipment data (equipment_name, equipment_type, flowrate, pressure, temperature)
        </p>
      </div>
    </div>
  );
}

export default FileUpload;
</file>

<file path="equipment-visualizer/frontend/src/components/ResultsDisplay.css">
.results-container {
  background-color: white;
  border-radius: 8px;
  padding: 30px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.results-container h2 {
  margin-top: 0;
  color: #333;
  border-bottom: 2px solid #4CAF50;
  padding-bottom: 10px;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin: 30px 0;
}

.stat-card {
  background-color: #f8f9fa;
  border-radius: 8px;
  padding: 20px;
  text-align: center;
  border-left: 4px solid #4CAF50;
}

.stat-label {
  font-size: 14px;
  color: #666;
  margin-bottom: 10px;
  font-weight: 500;
}

.stat-value {
  font-size: 28px;
  font-weight: bold;
  color: #333;
}

.equipment-type-section {
  margin: 30px 0;
}

.equipment-type-section h3 {
  color: #333;
  margin-bottom: 15px;
}

.equipment-type-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.equipment-type-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 15px;
  background-color: #f8f9fa;
  border-radius: 5px;
  border-left: 3px solid #4CAF50;
}

.equipment-type-name {
  font-weight: 500;
  color: #333;
}

.equipment-type-count {
  background-color: #4CAF50;
  color: white;
  padding: 5px 12px;
  border-radius: 15px;
  font-weight: bold;
}

.chart-section {
  margin-top: 40px;
}

.chart-section h3 {
  color: #333;
  margin-bottom: 20px;
}
</file>

<file path="equipment-visualizer/frontend/src/components/ResultsDisplay.js">
import React from 'react';
import './ResultsDisplay.css';
import EquipmentTypeChart from './EquipmentTypeChart';

function ResultsDisplay({ data }) {
  if (!data) {
    return null;
  }

  return (
    <div className="results-container">
      <h2>Analysis Results</h2>
      
      <div className="stats-grid">
        <div className="stat-card">
          <div className="stat-label">Total Equipment</div>
          <div className="stat-value">{data.total_equipment}</div>
        </div>
        
        <div className="stat-card">
          <div className="stat-label">Average Flowrate</div>
          <div className="stat-value">
            {data.average_flowrate !== null && data.average_flowrate !== undefined
              ? data.average_flowrate.toFixed(2)
              : 'N/A'}
          </div>
        </div>
        
        <div className="stat-card">
          <div className="stat-label">Average Pressure</div>
          <div className="stat-value">
            {data.average_pressure !== null && data.average_pressure !== undefined
              ? data.average_pressure.toFixed(2)
              : 'N/A'}
          </div>
        </div>
        
        <div className="stat-card">
          <div className="stat-label">Average Temperature</div>
          <div className="stat-value">
            {data.average_temperature !== null && data.average_temperature !== undefined
              ? data.average_temperature.toFixed(2)
              : 'N/A'}
          </div>
        </div>
      </div>

      <div className="equipment-type-section">
        <h3>Equipment Distribution by Type</h3>
        <div className="equipment-type-list">
          {data.equipment_per_type && Object.entries(data.equipment_per_type).map(([type, count]) => (
            <div key={type} className="equipment-type-item">
              <span className="equipment-type-name">{type}</span>
              <span className="equipment-type-count">{count}</span>
            </div>
          ))}
        </div>
      </div>

      <div className="chart-section">
        <h3>Equipment Type Distribution Chart</h3>
        <EquipmentTypeChart data={data.equipment_per_type} />
      </div>
    </div>
  );
}

export default ResultsDisplay;
</file>

<file path="equipment-visualizer/frontend/src/App.css">
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background-color: #f5f5f5;
}

.App {
  max-width: 1000px;
  margin: 0 auto;
  padding: 20px;
}

.header {
  background-color: #2c3e50;
  color: white;
  padding: 30px;
  border-radius: 8px;
  margin-bottom: 30px;
  text-align: center;
}

.header h1 {
  font-size: 28px;
  margin-bottom: 10px;
}

.header p {
  font-size: 16px;
  color: #ecf0f1;
}

.upload-section {
  background-color: white;
  padding: 30px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  margin-bottom: 30px;
}

.upload-section h2 {
  color: #2c3e50;
  margin-bottom: 20px;
  font-size: 22px;
}

.file-input-container {
  display: flex;
  gap: 15px;
  align-items: center;
  flex-wrap: wrap;
}

.file-input {
  flex: 1;
  padding: 10px;
  border: 2px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
}

.upload-button {
  background-color: #3498db;
  color: white;
  padding: 12px 30px;
  border: none;
  border-radius: 4px;
  font-size: 16px;
  cursor: pointer;
  transition: background-color 0.3s;
}

.upload-button:hover {
  background-color: #2980b9;
}

.upload-button:disabled {
  background-color: #95a5a6;
  cursor: not-allowed;
}

.loading {
  text-align: center;
  padding: 40px;
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.loading p {
  font-size: 18px;
  color: #7f8c8d;
}

.error-message {
  background-color: #e74c3c;
  color: white;
  padding: 15px;
  border-radius: 4px;
  margin-bottom: 20px;
}

.results-container {
  background-color: white;
  padding: 30px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.results-container h2 {
  color: #2c3e50;
  margin-bottom: 25px;
  font-size: 22px;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-bottom: 40px;
}

.stat-card {
  background-color: #ecf0f1;
  padding: 20px;
  border-radius: 6px;
  border-left: 4px solid #3498db;
}

.stat-card h3 {
  color: #7f8c8d;
  font-size: 14px;
  font-weight: normal;
  margin-bottom: 8px;
  text-transform: uppercase;
}

.stat-card p {
  color: #2c3e50;
  font-size: 24px;
  font-weight: bold;
}

.chart-section {
  margin-top: 30px;
  padding: 20px;
  background-color: #f8f9fa;
  border-radius: 6px;
}

.chart-section h3 {
  color: #2c3e50;
  margin-bottom: 20px;
  font-size: 18px;
}
</file>

<file path="equipment-visualizer/frontend/src/App.js">
import React, { useState } from 'react';
import './App.css';
import { Bar } from 'react-chartjs-2';
import {
  Chart as ChartJS,
  CategoryScale,
  LinearScale,
  BarElement,
  Title,
  Tooltip,
  Legend
} from 'chart.js';

// Register Chart.js components
ChartJS.register(
  CategoryScale,
  LinearScale,
  BarElement,
  Title,
  Tooltip,
  Legend
);

function App() {
  // State management
  const [selectedFile, setSelectedFile] = useState(null);
  const [results, setResults] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  // Handle file selection
  const handleFileChange = (event) => {
    setSelectedFile(event.target.files[0]);
    setError(null); // Clear any previous errors
  };

  // Handle form submission
  const handleSubmit = async () => {
    // Validation: Check if file is selected
    if (!selectedFile) {
      setError('Please select a CSV file first');
      return;
    }

    // Clear previous results and errors
    setResults(null);
    setError(null);
    setLoading(true);

    // Prepare form data
    const formData = new FormData();
    formData.append('file', selectedFile);

    try {
      // Send POST request to Django backend
      const response = await fetch('http://localhost:8000/api/analyze/', {
        method: 'POST',
        body: formData,
      });

      const data = await response.json();

      if (response.ok) {
        // Success: Store results
        setResults(data);
      } else {
        // Backend returned an error
        setError(data.error || 'An error occurred while processing the file');
      }
    } catch (err) {
      // Network or other error
      setError('Failed to connect to the server. Make sure the backend is running.');
    } finally {
      setLoading(false);
    }
  };

  // Prepare chart data
  const getChartData = () => {
    if (!results || !results.equipment_by_type) return null;

    const types = Object.keys(results.equipment_by_type);
    const counts = Object.values(results.equipment_by_type);

    return {
      labels: types,
      datasets: [
        {
          label: 'Number of Equipment',
          data: counts,
          backgroundColor: [
            'rgba(52, 152, 219, 0.8)',
            'rgba(46, 204, 113, 0.8)',
            'rgba(155, 89, 182, 0.8)',
            'rgba(241, 196, 15, 0.8)',
            'rgba(231, 76, 60, 0.8)',
          ],
          borderColor: [
            'rgba(52, 152, 219, 1)',
            'rgba(46, 204, 113, 1)',
            'rgba(155, 89, 182, 1)',
            'rgba(241, 196, 15, 1)',
            'rgba(231, 76, 60, 1)',
          ],
          borderWidth: 2,
        },
      ],
    };
  };

  const chartOptions = {
    responsive: true,
    plugins: {
      legend: {
        display: false,
      },
      title: {
        display: true,
        text: 'Equipment Distribution by Type',
        font: {
          size: 16,
        },
      },
    },
    scales: {
      y: {
        beginAtZero: true,
        ticks: {
          stepSize: 1,
        },
      },
    },
  };

  return (
    <div className="App">
      {/* Header */}
      <div className="header">
        <h1>Chemical Equipment Parameter Visualizer</h1>
        <p>Upload your CSV file to analyze equipment data instantly</p>
      </div>

      {/* Upload Section */}
      <div className="upload-section">
        <h2>Upload CSV File</h2>
        <div className="file-input-container">
          <input
            type="file"
            accept=".csv"
            onChange={handleFileChange}
            className="file-input"
          />
          <button
            onClick={handleSubmit}
            disabled={loading}
            className="upload-button"
          >
            {loading ? 'Processing...' : 'Analyze Data'}
          </button>
        </div>
        {selectedFile && (
          <p style={{ marginTop: '10px', color: '#27ae60' }}>
            Selected: {selectedFile.name}
          </p>
        )}
      </div>

      {/* Error Message */}
      {error && (
        <div className="error-message">
          <strong>Error:</strong> {error}
        </div>
      )}

      {/* Loading Indicator */}
      {loading && (
        <div className="loading">
          <p>Processing your CSV file...</p>
        </div>
      )}

      {/* Results Section */}
      {results && !loading && (
        <div className="results-container">
          <h2>Analysis Results</h2>

          {/* Statistics Grid */}
          <div className="stats-grid">
            <div className="stat-card">
              <h3>Total Equipment</h3>
              <p>{results.total_equipment}</p>
            </div>
            <div className="stat-card">
              <h3>Avg Flowrate</h3>
              <p>{results.average_flowrate}</p>
            </div>
            <div className="stat-card">
              <h3>Avg Pressure</h3>
              <p>{results.average_pressure}</p>
            </div>
            <div className="stat-card">
              <h3>Avg Temperature</h3>
              <p>{results.average_temperature}</p>
            </div>
          </div>

          {/* Chart Section */}
          <div className="chart-section">
            <h3>Equipment Distribution</h3>
            {getChartData() && (
              <Bar data={getChartData()} options={chartOptions} />
            )}
          </div>
        </div>
      )}
    </div>
  );
}

export default App;
</file>

<file path="equipment-visualizer/frontend/src/index.css">
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: #f5f5f5;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

* {
  box-sizing: border-box;
}
</file>

<file path="equipment-visualizer/frontend/src/index.js">
import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
</file>

<file path="equipment-visualizer/frontend/.gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.js

# testing
/coverage

# production
/build

# misc
.DS_Store
.env.local
.env.development.local
.env.test.local
.env.production.local

npm-debug.log*
yarn-debug.log*
yarn-error.log*
</file>

<file path="equipment-visualizer/frontend/package.json">
{
  "name": "equipment-visualizer-frontend",
  "version": "1.0.0",
  "private": true,
  "dependencies": {
    "axios": "^1.6.2",
    "chart.js": "^4.5.1",
    "react": "^18.2.0",
    "react-chartjs-2": "^5.3.1",
    "react-dom": "^18.2.0",
    "react-scripts": "5.0.1"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
  },
  "eslintConfig": {
    "extends": [
      "react-app"
    ]
  },
  "browserslist": {
    "production": [
      ">0.2%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  }
}
</file>

<file path="equipment-visualizer/QUICK_START.md">
# Quick Start Guide - Windows PowerShell

## Prerequisites
- Python 3.x installed
- Node.js and npm installed

## Running the Application

You need **TWO terminal windows** - one for backend, one for frontend.

---

## Terminal 1: Backend (Django)

```powershell
# Navigate to backend directory
cd C:\everything\Learn\pr\CEA\equipment-visualizer\backend

# Create virtual environment (if not exists)
python -m venv venv

# Activate virtual environment
.\venv\Scripts\Activate.ps1

# Install dependencies
pip install -r requirements.txt

# Run migrations (if needed)
python manage.py migrate

# Start Django server
python manage.py runserver
```

**Backend will run at:** http://localhost:8000

**Keep this terminal window open!**

---

## Terminal 2: Frontend (React)

Open a **NEW PowerShell window**:

```powershell
# Navigate to frontend directory
cd C:\everything\Learn\pr\CEA\equipment-visualizer\frontend

# Install dependencies (first time only)
npm install

# Start React development server
npm start
```

**Frontend will run at:** http://localhost:3000

The browser should automatically open. If not, manually go to: http://localhost:3000

---

## Using the Application

1. Make sure both servers are running (backend on port 8000, frontend on port 3000)
2. In the browser, click "Select CSV File"
3. Choose the `sample_data.csv` file from the project root
4. View the results and charts!

---

## Troubleshooting

### Backend Issues:
- **Port 8000 already in use?** 
  - Use: `python manage.py runserver 8001` (then update frontend API_URL)
- **Module not found?**
  - Make sure venv is activated: `.\venv\Scripts\Activate.ps1`
  - Reinstall: `pip install -r requirements.txt`

### Frontend Issues:
- **Port 3000 already in use?**
  - React will ask to use a different port, say yes
- **npm install fails?**
  - Make sure Node.js is installed: `node --version`
  - Try: `npm cache clean --force` then `npm install`

### CORS Errors:
- Make sure backend is running on port 8000
- Check that `django-cors-headers` is installed in backend

---

## Stopping the Servers

- **Backend:** Press `Ctrl+C` in the backend terminal
- **Frontend:** Press `Ctrl+C` in the frontend terminal
</file>

<file path="equipment-visualizer/README.md">
# Chemical Equipment Parameter Visualizer

A web-based data visualization system where a React frontend uploads CSV files to a Django backend. The backend processes the data using Pandas and exposes summary analytics through APIs. The frontend consumes these APIs to display numbers and charts.

## Project Structure

```
equipment-visualizer/
├── backend/              # Django backend
│   ├── api/             # API app with CSV processing
│   ├── equipment_backend/  # Django project settings
│   ├── manage.py
│   └── requirements.txt
└── frontend/            # React frontend
    ├── src/
    │   ├── components/  # React components
    │   ├── App.js
    │   └── index.js
    └── package.json
```

## Features

- Upload CSV files containing equipment data
- Automatic calculation of:
  - Total number of equipment
  - Average flowrate
  - Average pressure
  - Average temperature
  - Equipment count per type
- Visual charts showing equipment distribution
- Clean separation between frontend and backend

## CSV File Format

The CSV file should contain the following columns (case-insensitive):
- `equipment_name`
- `equipment_type`
- `flowrate`
- `pressure`
- `temperature`

## Setup Instructions

### Backend Setup

1. Navigate to the backend directory:
   ```bash
   cd equipment-visualizer/backend
   ```

2. Create a virtual environment (recommended):
   ```bash
   python -m venv venv
   ```

3. Activate the virtual environment:
   - Windows:
     ```bash
     venv\Scripts\activate
     ```
   - Linux/Mac:
     ```bash
     source venv/bin/activate
     ```

4. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

5. Run migrations (if needed):
   ```bash
   python manage.py migrate
   ```

6. Start the Django development server:
   ```bash
   python manage.py runserver
   ```

The backend will be available at `http://localhost:8000`

### Frontend Setup

1. Navigate to the frontend directory:
   ```bash
   cd equipment-visualizer/frontend
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

3. Start the React development server:
   ```bash
   npm start
   ```

The frontend will be available at `http://localhost:3000`

## Usage

1. Start both backend and frontend servers (see Setup Instructions above)
2. Open your browser and navigate to `http://localhost:3000`
3. Click "Select CSV File" and choose a CSV file with equipment data
4. View the calculated statistics and charts

## API Endpoint

The backend exposes a single API endpoint:

- **POST** `/api/upload/`
  - Accepts a CSV file via multipart/form-data
  - Returns JSON with calculated statistics

## Technologies Used

- **Backend**: Django 6.0.2, Django REST Framework, Pandas
- **Frontend**: React 18.2.0, Chart.js, Axios
- **CORS**: django-cors-headers for cross-origin requests

## Notes

- The backend is designed to be reusable for future desktop application development
- No authentication or database storage is implemented in this phase
- The system focuses on processing and displaying data, not storing it
</file>

<file path="equipment-visualizer/sample_data.csv">
equipment_name,equipment_type,flowrate,pressure,temperature
Pump-001,Pump,120.5,5.2,310
Pump-002,Pump,115.3,5.0,308
Pump-003,Pump,125.8,5.4,312
Reactor-A,Reactor,85.2,8.5,350
Reactor-B,Reactor,90.1,8.7,355
Reactor-C,Reactor,88.5,8.6,352
Heater-01,Heater,200.0,3.2,400
Heater-02,Heater,195.5,3.1,395
Heater-03,Heater,205.2,3.3,405
Pump-004,Pump,118.7,5.1,309
Pump-005,Pump,122.3,5.3,311
Reactor-D,Reactor,87.8,8.4,348
Heater-04,Heater,198.5,3.2,398
Pump-006,Pump,119.2,5.2,310
Reactor-E,Reactor,89.3,8.5,351
Heater-05,Heater,202.1,3.25,402
Pump-007,Pump,121.5,5.25,310
Reactor-F,Reactor,86.9,8.3,347
Heater-06,Heater,199.8,3.15,399
Pump-008,Pump,117.9,5.0,307
Pump-009,Pump,123.6,5.4,313
Reactor-G,Reactor,91.2,8.8,356
Reactor-H,Reactor,88.1,8.5,350
Reactor-I,Reactor,87.5,8.4,349
Pump-010,Pump,120.0,5.2,310
</file>

<file path="test_equipment.csv">
equipment_name,equipment_type,flowrate,pressure,temperature
Pump-A,Pump,120,5.5,310
Pump-B,Pump,115,5.3,308
Reactor-1,Reactor,200,6.2,350
Heater-X,Heater,80,4.1,400
Heater-Y,Heater,85,4.3,405
</file>

</files>
